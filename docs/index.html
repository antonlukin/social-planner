<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>Social Planner: documentation</title>

    <meta name="description" content="Documentation for Social Planner — WordPress plugin for automatic posting to social media accounts">
    <meta property="og:url" content="https://antonlukin.github.io/social-planner/">
    <meta property="og:title" content="Social Planner / Documentation">
    <meta property="og:description" content="Documentation for Social Planner — WordPress plugin for automatic posting to social media accounts">

    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <h1>Social Planner: documentation</h1>

        <p>
            <a href="https://github.com/antonlukin/social-planner" target="_blank">Social Planner</a> is a WordPress plugin for automatic posting to social media accounts.
            It allows you to schedule announcements of your posts on social networks.
            At the moment, 4 providers are supported, but you can easily add a new one yourself.
        </p>

        <p>
            This documentation will help you install and configure the plugin.
            Advanced developers can figure out how to extend functionality and write add-ons.
            If you find a bug here or in the plugin itself, feel free to open an <a href="https://github.com/antonlukin/social-planner/issues" target="_blank">issue</a> on Github.
            I will try to answer as soon as possible.
        </p>
    </header>

    <aside>
        <h2>Table of contents</h2>

        <nav>
            <a href="#installation">Installation</a>
            <a href="#configuration">Configuration</a>

            <nav>
                <a href="#telegram">Telegram</a>
                <a href="#facebook">Facebook</a>
                <a href="#vk">VK.com</a>
                <a href="#twitter">Twitter</a>
            </nav>

            <a href="#task-scheduling">Task scheduling</a>
            <a href="#faq">FAQ</a>
            <a href="#custom-providers">Custom providers</a>
            <a href="#actions-filters">Actions and filters</a>
            <a href="#donation">Donation</a>
            <a href="#contribution">Contribution</a>
        </nav>
    </aside>

    <section>
        <h2 id="installation">Installation <a aria-hidden="true" href="#installation">#</a></h2>

        <p>
            Just search <code>social-planner</code> and activate the plugin from your admin dashboard.
            You can also manually upload the <a href="https://downloads.wordpress.org/plugin/social-planner.zip" target="_blank">latest release</a>
            to <code>/wp-content/plugins</code> and activate it.
        </p>

        <figure>
            <a href="images/installation.png" target="_blank">
                <img src="images/installation.png" alt="Social Planner WordPress plugin installation">
            </a>

            <figcaption>The easiest way is to install the plugin from the official catalog.</figcaption>
        </figure>

        <p>
            Due to the restrictions of the WordPress scheduling system, announcements on social networks may be delayed.
            To avoid this, it is advisable to configure the work of the <strong>system cron</strong>.
            If you are unable to implement it yourself, contact your hoster or system administrator.
            Read more <a href="https://developer.wordpress.org/plugins/cron/hooking-wp-cron-into-the-system-task-scheduler/" target="_blank">here</a>.
        </p>
    </section>

    <section>
        <h2 id="configuration">Configuration <a aria-hidden="true" href="#configuration">#</a></h2>

        <p>
            Before using the plugin, you need to configure it.
            Immediately after installation, go to the plugin page.
            It is located in the <strong>Settings</strong> section.
            Here you need to add options for the required providers.
        </p>

        <p>
            Pay attention to the <strong>Subtitle</strong> optional field on each provider.
            Fill it out if you want to use several accounts of the same social network or just for your convenience when scheduling.
        </p>

        <article>
            <h3 id="telegram">Telegram <a aria-hidden="true" href="#telegram">#</a></h3>

            <p>
                You can send messages to any group or channel.
                To do this, you need to create and add a special Bot to the required chat with the ability to send messages.
            </p>

            <p>
                Write to the <a href="https://t.me/BotFather" target="_blank">@BotFather</a> in Telegram and create a new Bot.
                Follow the bot prompts, fill in all required fields and get an API Token.
            </p>

            <p>
                Then you need to find out the group or channel ID.
                If the chat has a <strong>public link</strong>, then you can use its <strong>username</strong> (in the format @channelusername).<br>
                Otherwise you can write the message to <a href="username_to_id_bot" target="_blank">@username_to_id_bot</a> or use <a href="https://stackoverflow.com/a/56546442/8495047" target="_blank">this guide</a>.
                Note that chat ID can be negative.
            </p>

            <figure>
                <a href="images/telegram-1.png" target="_blank">
                    <img src="images/telegram-1.png" alt="Social Planner Telegram configuration">
                </a>

                <figcaption>Example settings for Telegram.</figcaption>
            </figure>

            <p>
                If you have an access error when sending a message, try to check the correctness of the API Token and the chat ID,
                bypassing the plugin.
            </p>

            <p>You can find full help on Telegram Bot API on the <a href="https://core.telegram.org/bots/api" target="_blank">official website</a>.</p>
        </article>

        <article>
            <h3 id="facebook">Facebook <a aria-hidden="true" href="#facebook">#</a></h3>

            <p>
                With this plugin you can publish to <strong>Facebook Pages only</strong>.
                If you already have an application with permissions to publish to your page,
                you can immediately proceed to the <a href="#facebook-pageid">stage</a> of obtaining the Page ID.
            </p>

            <p>
                <strong>Attention!</strong> Due to Facebook Restriction we can use the new Facebook App in HTTPS sites only.
            </p>

            <p>
                <strong>Attention!</strong> You can publish to Facebook with the approved app only.
                So you need to submit the app for approval and it may take upto 3 months to get the approval.
                Facebook changes the rules of using its products often, so before starting the setup,
                read the latest guidelines on the <a href="https://developers.facebook.com/docs/pages/getting-started" target="_blank">help page.</a>
            </p>

            <p>
                To create a new Facebook application, go to the <a href="https://developers.facebook.com/apps" target="_blank">developer pages</a>
                and create new one. You will need to select the type of your application.
            </p>

            <figure>
                <a href="images/facebook-1.png" target="_blank">
                    <img src="images/facebook-1.png" alt="Social Planner Facebook configuration">
                </a>

                <figcaption>The easiest way to focus on Business integrations.</figcaption>
            </figure>

            <p>
                Enter the App Display Name and the contact Email. The purpose is for <strong>Yourself or your own business</strong>.
            </p>

            <p id="facebook-pageid">
                After the application is created, let's find out the ID of your page.
                Read how to do it on the Facebook <a href="https://www.facebook.com/help/1503421039731588" target="_blank">help page</a>.
            </p>

            <figure>
                <a href="images/facebook-2.png" target="_blank">
                    <img src="images/facebook-2.png" alt="Social Planner Facebook configuration">
                </a>

                <figcaption>This is how the Page ID usually looks.</figcaption>
            </figure>

            <p>
                Now let's move on getting access token.
                For this you can use <a href="https://developers.facebook.com/tools/explorer/" target="_blank">Graph API Explorer</a> tool.
                In the right section select your Facebook App and in the User or Page field click <strong>Get page access token</strong>.
            </p>

            <p>
                Now you need to request some required permissions:
            </p>

            <ul>
                <li>pages_manage_metadata</li>
                <li>pages_manage_posts</li>
                <li>pages_manage_read_engagement</li>
                <li>pages_show_list</li>
            </ul>

            <figure>
                <a href="images/facebook-3.png" target="_blank">
                    <img src="images/facebook-3.png" alt="Social Planner Facebook configuration">
                </a>

                <figcaption>Ideally you should see something like this for your app and page.</figcaption>
            </figure>

            <p>
                Check that the access token is working by sending a <strong>POST</strong> request in the Graph Explorer tool of the
                <code>{PageID}/feed</code>.
                Getting an error <code>The post is empty. Please enter a message to share</code> means that the token is correct.
                If the error says about the need to obtain additional permissions, then you will have to pass the application verification.
                You can read more about this in the <a href="https://developers.facebook.com/docs/app-review/submission-guide" target="_blank">Facebook help guide</a>.
            </p>

            <p>
                The received token must be made long-term with <a href="https://developers.facebook.com/tools/debug/accesstoken/" target="_blank">Access Token Debuger</a>.
                You can also get a permanent token using <a href="https://stackoverflow.com/a/43570120/8495047" target="_blank">this guide</a>.
            </p>

            <figure>
                <a href="images/facebook-4.png" target="_blank">
                    <img src="images/facebook-4.png" alt="Social Planner Facebook configuration">
                </a>

                <figcaption>Receiving permanent token in Access Token Debugger.</figcaption>
            </figure>

            <p>
                After receiving the <strong>access token</strong> and <strong>Page ID</strong>, you can proceed to configuring the plugin.
            </p>

            <figure>
                <a href="images/facebook-5.png" target="_blank">
                    <img src="images/facebook-5.png" alt="Social Planner Facebook configuration">
                </a>

                <figcaption>Example settings for Facebook.</figcaption>
            </figure>
        </article>

        <article>
            <h3 id="vk">VK.com <a aria-hidden="true" href="#vk">#</a></h3>

            <p>
                You can send messages both to your profile wall and to the community where you are an administrator.
            </p>

            <p>
                Start by registering your app on the <a href="https://vk.com/editapp?act=create" target="_blank">developer page</a>.
                Enter something in the title field and choose <strong>Standalone app</strong> platform.
                Then confirm your action with phone call or push notification.
            </p>

            <figure>
                <a href="images/vk-1.png" target="_blank">
                    <img src="images/vk-1.png" alt="Social Planner VK.com configuration">
                </a>
            </figure>

            <p>
                Go to the <strong>Settings</strong> tab and copy the <strong>App ID</strong>.
                Insert this ID to the field below and push the button to generate your Token.
            </p>

            <form action="https://oauth.vk.com/authorize" method="GET" target="_blank">
                <input type="text" name="client_id" value="" placeholder="7722553" required>

                <input type="hidden" name="scope" value="offline,photos,wall">
                <input type="hidden" name="response_type" value="token">
                <input type="hidden" name="redirect_uri" value="https://oauth.vk.com/blank.html">
                <input type="hidden" name="revoke" value="1">
                <input type="hidden" name="v" value="5.125">

                <button type="submit">Generate token</button>
            </form>

            <p>
                After you agree to the terms and conditions, the page will be redirected to <code>oauth.vk.com</code> domain.
                Your Token will be in <code>access_token</code> parameter.
            </p>

            <figure>
                <a href="images/vk-2.png" target="_blank">
                    <img src="images/vk-2.png" alt="Social Planner VK.com configuration">
                </a>
            </figure>

            <p>
                Please note that VK.com warns you not to transfer the Token to other sites.
                So keep it secret and only use it on trusted sites.
                Social Planner <strong>does not send</strong> any user data to remote servers.
            </p>

            <p>
                Now you need to get the profile or community ID.
                You can find it in the links of your pages. Use a negative value to designate a community ID.
            </p>

            <figure>
                <a href="images/vk-3.png" target="_blank">
                    <img src="images/vk-3.png" alt="Social Planner VK.com configuration">
                </a>

                <figcaption>You can see the ID in the url on the stats page for example.</figcaption>
            </figure>

            <p>
                Use <strong>access token</strong> and <strong>group ID</strong> on the plugin settings page.
            </p>

            <figure>
                <a href="images/vk-4.png" target="_blank">
                    <img src="images/vk-4.png" alt="Social Planner VK.com configuration">
                </a>

                <figcaption>Example settings for VK.com.</figcaption>
            </figure>
        </article>

        <article>
            <h3 id="twitter">Twitter <a aria-hidden="true" href="#twitter">#</a></h3>

            <p>
                To set up this provider, you need to have full access to your Twitter account,
                as well as access to the attached Email in order to receive messages from support.
                If you already have a developer account and you created the application earlier,
                then skip directly to the <a href="#twitter-tokens">last step</a>.
            </p>

            <p>
                <strong>Attention!</strong> Getting keys on Twitter can take patience and time.
                It is plugin independent and completely on your shoulders.
            </p>

            <p>
                Log in to <a href="https://developer.twitter.com/en/apply-for-access" target="_blank">Twitter Developers</a>
                and click on the <strong>Apply for a developer account</strong> button.
            </p>

            <p>
                Now you need to fill out a form to obtain developer status.
                Fill in all fields and submit. You will receive a response in about 12 hours.
                Try to describe in as much detail how you will use the keys and on which specific site.

                A sample description is given below.
            </p>

            <blockquote>
                <p>
                    I am using a WordPress plugin Social Planner (https://wordpress.org/plugins/social-planner/) to publish posts automatically from blog to Twitter.
                    The plugin requires Twitter App to publish posts from WordPress to Twitter.
                    For this I must create an app and provide the app details such as API key, API secret, Access token and Access token secret.

                    While creating a new post on my WordPress site, I can schedule the task to send this post to Twitter with custom excerpt or image.
                    The detailed process is described in the documentation for the plugin (https://antonlukin.github.io/social-planner/#task-scheduling).
                </p>
            </blockquote>

            <figure>
                <a href="images/twitter-1.png" target="_blank">
                    <img src="images/twitter-1.png" alt="Social Planner Twitter configuration">
                </a>

                <figcaption>Accept terms and conditions and submit the application.</figcaption>
            </figure>

            <p>
                Once the developer account gets approved, you will get a mail from Twitter. Then you can create a new app.
                In the create app section we can add the App Name, Application description, website url, and tell how the app is used.
                A sample description is given below.
            </p>

            <blockquote>
                <p>
                    I am using a WordPress plugin to publish posts automatically from blog to Twitter as a simple text message or or as text message with image.
                    The plugin requires Twitter App to publish posts from WordPress to Twitter.
                    For this I must create an app and provide the app details such as API key, API secret, Access token and Access token secret.
                </p>
            </blockquote>

            <p>
                Review the terms and create the app. Go to the <strong>Keys and tokens</strong> section.
                Click on the <strong>Create</strong> button under <strong>Access token & access token secret</strong> section.
            </p>

            <p id="twitter-tokens">
                Now you can use the received keys to configure the plugin.
                Access level should be <strong>Read and write</strong>.
            </p>

            <figure>
                <a href="images/twitter-2.png" target="_blank">
                    <img src="images/twitter-2.png" alt="Social Planner Twitter configuration">
                </a>

                <figcaption>Necessary Twitter access tokens.</figcaption>
            </figure>

            <p>
                You need to use all keys and  tokens when configuring the plugin.
                Fields order on the settings page is the same as the order in Twitter.
            </p>

            <figure>
                <a href="images/twitter-3.png" target="_blank">
                    <img src="images/twitter-3.png" alt="Social Planner Twitter configuration">
                </a>

                <figcaption>Example settings for Twitter.</figcaption>
            </figure>
        </article>
    </section>

    <section>
        <h2 id="task-scheduling">Task scheduling <a aria-hidden="true" href="#task-scheduling">#</a></h2>

        <p>
            Once you have configured the plugin, you can start scheduling social media announcements.
            Go to the post edit page and scroll to the end of the screen. There you will see the metabox for scheduling.
        </p>

        <figure>
            <a href="images/scheduling-1.png" target="_blank">
                <img src="images/scheduling-1.png" alt="Social Planner task scheduling">
            </a>

            <figcaption>This is how the metabox you need looks like.</figcaption>
        </figure>

        <p>
            Choose the time at which you want to schedule the release of the announcement,
            social networks and enter the text.
            If you want to attach a poster, click on the big button with a plus sign.
        </p>

        <p>
            To delete the selected poster, click on the image again.
        </p>

        <p>
            Some social networks allow you to generate a preview of the link and load the poster and other opengraph tags into the post.
            You can disable this by enabling the checkbox on the bottom right.
            Experiment with this behavior on test accounts to decide how you want to display links.
        </p>

        <p>
            After filling in the meta box fields, update or publish the entry.
            If the time was chosen for the announcement, then the task will be automatically scheduled.
        </p>

        <p>
            If the publication date of the post itself is later than the date of the task,
            then the announcement will be automatically rescheduled to the post release date.
        </p>

        <figure>
            <a href="images/scheduling-2.png" target="_blank">
                <img src="images/scheduling-2.png" alt="Social Planner task scheduling">
            </a>

            <figcaption>Scheduled task.</figcaption>
        </figure>

        <p>
            After publishing, you will be able to see links to published posts in place of providers' checkboxes.
            Or errors in the same place in case of problems with sending.
        </p>
    </section>

    <section>
        <h2 id="faq">FAQ <a aria-hidden="true" href="#faq">#</a></h2>

        <p>
            This section describes common problems when using the plugin and how to solve them.
            If you haven't found your question, it is best to ask it in the official repository on
            <a href="https://github.com/antonlukin/social-planner/issues" target="_blank">Github</a>.
        </p>

        <h3>Can I avoid storing social networks tokens in the database?</h3>
        <p>
            Yes, you can define a constant <code>SOCIAL_PLANNER_PROVIDERS</code> with your settings.
            The best place for this constant is in the file <code>wp-config.php</code> or in the <code>functions.php</code>.
        </p>

        <details>
            <summary>Show me an example</summary>

            <p>
                You should define provider key as <code>{network_name}-{index}</code>,
                where <code>index</code> is something alphanumeric and unique.

                You can see correct network name and all availible network fields in
                <a href="https://github.com/antonlukin/social-planner/tree/master/networks" target="_blank">source code</a>.
            </p>

            <pre>
                <code class="language-php">
                    define( 'SOCIAL_PLANNER_PROVIDERS', array(
                        'vk-1' => array(
                            'token' => 'token',
                            'group' => '-123',
                        ),

                        'telegram-1' => array(
                            'token' => '123:token',
                            'group' => '123',
                        ),

                        'facebook-1' => array(
                            'token' => 'token',
                            'group' => '123',
                            'title' => 'Facebook',
                        ),

                        'twitter-1' => array(
                            'consumer_key'    => 'key',
                            'consumer_secret' => 'secret',
                            'access_token'    => 'token',
                            'access_secret'   => 'secret'
                        )
                    ) );
                </code>
            </pre>
        </details>

        <h3>How can I show the settings page only to some users?</h3>
        <p>
            You can use filter <code>social_planner_hide_settings</code>.
        </p>
        <details>
            <summary>Show me an example</summary>

            <pre>
                <code class="language-php">
                    function my_hide_settings( $hide_settings ) {
                        $user = wp_get_current_user();

                        if ( empty( $user->user_login ) || 'admin' !== $user->user_login ) {
                            $hide_settings = true;
                        }

                        return $hide_settings;
                    }

                    add_filter( 'social_planner_hide_settings', 'my_hide_settings' );
                </code>
            </pre>
        </details>

        <h3>Can I use html in the summary field when scheduling a new task?</h3>
        <p>
            You can use only Markdown <code>**text here**</code> for <strong>bold</strong> and
            <code>__text here__</code> for <em>italic</em> to beatify Telegram announcements.
        </p>

        <h3>How to hide the metabox for custom post types?</h3>
        <p>
            Plugin shows metabox for all public post types except attachments.
            You can override this behavior with the <code>social_planner_post_types</code> filter.
        </p>
        <details>
            <summary>Show me an example</summary>

            <pre>
                <code class="language-php">
                    function my_post_types( $post_types ) {
                        // Remove metabox from pages.
                        foreach ( $post_types as $i => $name ) {
                            if ( 'page' === $name ) {
                                unset( $post_types[ $i ] );
                            }
                        }

                        return $post_types;
                    }

                    add_filter( 'social_planner_post_types', 'my_post_types' );
                </code>
            </pre>
        </details>

        <h3>What happens when you delete the plugin?</h3>
        <p>
            By default, when uninstalling the plugin through the admin panel, all database options are deleted,
            including data on submitted tasks. If you want to keep them uninstall the plugin indirectly via the filesystem.
        </p>
    </section>


    <section>
        <h2 id="custom-providers">Custom providers <a aria-hidden="true" href="#custom-providers">#</a></h2>

        <p>
            Only 4 social networks are available for posting now.
            Some more are likely to be added soon, but until that happens, you might want to write your own extension.
            And it's not that hard to do.
        </p>

        <p>
            You need to create a special social network class and connect it to the plugin.
            There is an <code>Example</code> of a non-existent network in below.
            Copy it and replace the information in the methods.
        </p>

        <details>
            <summary>Example network class</summary>

            <pre>
                <code class="language-php">
                    &lt;?php

                    class My_Network_Example {
                        /**
                        * Unique network slug.
                        * Use latin alphanumeric characters and underscore only.
                        */
                        const NETWORK_NAME = 'example';

                        /**
                        * Return human-readable network label
                        */
                        public static function get_label() {
                            return 'Example';
                        }

                        /**
                        * Return network required settings fields
                        */
                        public static function get_fields() {
                            $fields = array(
                                'token' => array(
                                    'label'       => 'Token',
                                    'placeholder' => '123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11',
                                    'required'    => true,
                                ),

                                'group' => array(
                                    'label'    => 'Group ID',
                                    'required' => true,
                                ),

                                'title' => array(
                                    'label' => 'Subtitle',
                                    'hint'  => 'Optional field.'
                                ),
                            );

                            return $fields;
                        }

                        /**
                        * Send message method
                        *
                        * @param array $message  Message data.
                        * @param array $settings Settings array from options.
                        */
                        public static function send_message( $message, $settings ) {
                            // You should write this sending method using $message and $settings.
                            $response = self::my_sending_method( $message, $settings );

                            // If something went wrong you should return WP_Error.
                            if ( empty( $response ) ) {
                                return new WP_Error( 'sending', 'Example sending error' );
                            }

                            // If it is ok, you should return a message link or ID.
                            return 'https://example.com/' . $response;
                        }
                </code>
            </pre>
        </details>

        <p>
            Your class must provide <code>NETWORK_NAME</code> constant and public static <code>send_message</code> method.
            You can see how the other classes of social networks of the plugin are implemented in the
            <a href="https://github.com/antonlukin/social-planner/tree/master/networks" target="_blank">repository</a>.
        </p>

        <p>
            Place your class file in your theme or plugin and connect with filter:
        </p>

        <pre>
            <code class="language-php">
                function add_example_network( $networks ) {
                    $networks['My_Network_Example'] = get_template_directory() . '/inc/class-network-example.php';

                    return $networks;
                }

                // This filter must execute before the `init` event.
                add_filter( 'social_planner_networks', 'add_example_network' );
            </code>
        </pre>

        <p>
            That's all you need. Now check if the new provider has appeared on the Settings page.
        </p>
    </section>

    <section>
        <h2 id="actions-filters">Actions and filters <a aria-hidden="true" href="#actions-filters">#</a></h2>

        <p>
            Social Planner provides developers with a large number of hooks that can be used to change the behavior of the plugin.
            Put the hook code in <code>functions.php</code> file of your theme or in your plugin.
        </p>

        <details>
            <summary>social_planner_dashboard_before</summary>

            <p>
                Use this <strong>action</strong> to add something before the dashboard widget.
            </p>

            <p>
                Note that the content inside the widget is composed with js and if you want to change it,
                you need to use the <code>social_planner_dashboard_object</code> filter.
            </p>

            <pre>
                <code class="language-php">
                    function my_dashboard_before() {
                        echo 'This text will be displayed in the dashboard widget';
                    }

                    add_action( 'social_planner_dashboard_before', 'my_dashboard_before' );
                </code>
            </pre>

        </details>

        <details>
            <summary>social_planner_metabox_before</summary>

            <p>
                Use this <strong>action</strong> to add something before metabox in post edition screen.
            </p>

            <p>
                Note that the content inside the metabox is composed with js and if you want to change it,
                you need to use the <code>social_planner_metabox_object</code> filter.
            </p>

            <pre>
                <code class="language-php">
                    function my_metabox_before() {
                        echo 'This text will be displayed in the metabox';
                    }

                    add_action( 'social_planner_metabox_before', 'my_metabox_before' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_task_sent</summary>

            <p>
                Use this <strong>action</strong> to do something with the task results right after sending.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * Fires right after task sent.
                     *
                     * @param array  $results List of results after task sending.
                     * @param string $key     Task key.
                     * @param int    $post_id Post ID.
                     */
                    function my_task_sent( $results, $key, $post_id ) {
                        my_save_results( $results, $key );
                    }

                    add_action( 'social_planner_task_sent', 'my_task_sent', 10, 3 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_networks</summary>

            <p>
                The filter is used to add a custom social network for sending announcements.
                Read more about this in the <a href="#custom-providers">Custom providers</a> section of this documentation.
            </p>
        </details>

        <details>
            <summary>social_planner_network_label</summary>

            <p>
                You can change network labels in the metabox and settings with this filter.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param string $label Network label.
                     * @param string $class Current network class.
                     */
                    function my_network_label( $label, $class ) {
                        if ( 'Social_Planner\Network_Telegram' === $class ) {
                            $label = 'My custom ' . $label;
                        }

                        return $label;
                    }

                    add_filter( 'social_planner_network_label', 'my_network_label', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_time_format</summary>

            <p>
                You can change the date format used by the plugin with this filter.
                The default is the format from the WordPress settings.
                Read more in <a href="https://wordpress.org/support/section/formatting-date-and-time/" target="_blank">codex section</a>.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param string $format Datetime format.
                     */
                    function my_time_format( $format ) {
                        return 'F j, Y h:i';
                    }

                    add_filter( 'social_planner_time_format', 'my_time_format' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_hide_dashboard</summary>

            <p>
                You can use this filter to hide the dashboard from some users or roles.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param bool $hide_dashboard Set true to hide dashboard.
                     */
                    function my_hide_dashboard( $hide_dashboard ) {
                        if ( ! current_user_can( 'manage_options' ) ) {
                            $hide_dashboard = true;
                        }

                        return $hide_dashboard;
                    }

                    add_filter( 'social_planner_hide_dashboard', 'my_hide_dashboard' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_dashboard_object</summary>

            <p>
                This filter allows you to manage an object with the dashboard settings.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $object Array of dashboard script object.
                     */
                    function my_dashboard_object( $object ) {
                        $object['tasks'] = my_dashboard_handler( 'tasks' );

                        return $object;
                    }

                    add_filter( 'social_planner_dashboard_object', 'my_dashboard_object' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_sanitize_tasks</summary>

            <p>You can update tasks right after sanitization on the metabox saving with this filter.</p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $sanitized List of tasks after sanitization.
                     * @param array $tasks     List of tasks before sanitization.
                     */
                    function my_sanitize_tasks( $sanitized_tasks, $tasks ) {
                        return my_tasks_sanitization( $tasks );
                    }

                    add_filter( 'social_planner_sanitize_tasks', 'my_sanitize_tasks', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_get_tasks</summary>

            <p>
                This filter allows you to change the array with tasks during the get_post_meta request.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $tasks   List of tasks from post meta.
                     * @param int   $post_id Post ID.
                     */
                    function my_get_tasks( $tasks, $post_id ) {
                        if ( 0 === $post_id ) {
                            $tasks = array();
                        }

                        return $tasks;
                    }

                    add_filter( 'social_planner_get_tasks', 'my_get_tasks', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_update_tasks</summary>

            <p>
                This filter allows you to change the array with tasks right before the update_post_meta request.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array  $tasks   List of tasks from post meta.
                     * @param int    $post_id Post ID.
                     */
                    function my_update_tasks( $tasks, $post_id ) {
                        if ( 0 === $post_id ) {
                            $tasks = array();
                        }

                        return $tasks;
                    }

                    add_filter( 'social_planner_update_tasks', 'my_update_tasks', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_get_results</summary>

            <p>
                This filter allows you to change the array with results during the get_post_meta request.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $results List of results from post meta.
                     * @param int   $post_id Post ID.
                     */
                    function my_get_results( $results, $post_id ) {
                        if ( 0 === $post_id ) {
                            $results = array();
                        }

                        return $results;
                    }

                    add_filter( 'social_planner_get_results', 'my_get_results', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_update_results</summary>

            <p>
                This filter allows you to change the array with results right before the update_post_meta request.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $results List of tasks from post meta.
                     * @param int   $post_id Post ID.
                     */
                    function my_update_results( $results, $post_id ) {
                        if ( 0 === $post_id ) {
                            $results = array();
                        }

                        return $results;
                    }

                    add_filter( 'social_planner_update_results', 'my_update_results', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_metabox_object</summary>

            <p>
                This filter allows you to manage an object with the metabox settings.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $object  Array of metabox script object.
                     * @param int   $post_id Current post ID.
                     */
                    function my_metabox_object( $object, $post_id ) {
                        $object = array(
                            'meta'      => my_metabox_handler( 'meta' ),
                            'action'    => my_metabox_handler( 'action' ),
                            'nonce'     => my_metabox_handler( 'nonce' ),
                            'tasks'     => my_metabox_handler( 'tasks' ),
                            'results'   => my_metabox_handler( 'results' ),
                            'offset'    => my_metabox_handler( 'offset' ),
                            'calendar'  => my_metabox_handler( 'calendar' ),
                            'providers' => my_metabox_handler( 'providers' ),
                            'schedules' => my_metabox_handler( 'schedules' ),
                        );

                        return $object;
                    }

                    add_filter( 'social_planner_metabox_object', 'my_metabox_object', 10, 2 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_hide_metabox</summary>

            <p>
                You can use this filter to hide the metabox from some users or roles.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param bool $hide_metabox Set true to hide metabox.
                     */
                     function my_hide_metabox( $hide_metabox ) {
                        if ( ! current_user_can( 'manage_options' ) ) {
                            $hide_metabox = true;
                        }

                        return $hide_metabox;
                    }

                    add_filter( 'social_planner_hide_metabox', 'my_hide_metabox' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_post_types</summary>

            <p>
                By default, the plugin shows the metabox for all public post types except attachments.
                You can override this behavior with this filter.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $post_types Array of post types for which the metabox is displayed.
                     */
                    function my_post_types( $post_types ) {
                        $post_types[] = 'my_hidden_type';

                        foreach ( $post_types as $i => $name ) {
                            if ( 'page' === $name ) {
                                unset( $post_types[ $i ] );
                            }
                        }

                        return $post_types;
                    }

                    add_filter( 'social_planner_post_types', 'my_post_types' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_calendar_days</summary>

            <p>
                This filter manages the number of future days in schedule select box.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param int $days_count Number of days in task calendar select box.
                     */
                    function my_calendar_days( $days_number ) {
                        return 7;
                    }

                    add_filter( 'social_planner_calendar_days', 'my_calendar_days' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_time_offset</summary>

            <p>
                This filter sets a time offset. By default, it is a value between UTC and WordPress time in seconds.
                This offset is used in admin-side metabox to choose the time for planning.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param int $offset Time offset in seconds from UTC.
                     */
                    function my_time_offset( $offset ) {
                        $offset = timezone_offset_get( wp_timezone(), date_create( 'now' ) );

                        return $offset;
                    }

                    add_filter( 'social_planner_time_offset', 'my_time_offset' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_post_statuses</summary>

            <p>
                This filter sets post statuses that can be scheduled.
                By default, we can schedule only posts with statuses 'publish' or 'future'.
                You can change this behavior.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $statuses List of post statuses.
                     */
                    function my_post_statuses( $statuses ) {
                        $statuses = array( 'private', 'pending', 'future', 'publish' );

                        return $statuses;
                    }

                    add_filter( 'social_planner_post_statuses', 'my_post_statuses' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_poster_prepare_message</summary>

            <p>
                This filter allows updating message array right before network sending method execution.
                This is a great place, for example, to add some text to the excerpt field or replace a post link.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array  $message Sending message data.
                     * @param string $target  Target provider name.
                     * @param array  $task    Scheduled task data.
                     */
                    function my_prepare_message( $message, $target, $task ) {
                        $message['link'] = my_message_link( $message['post_id'] );

                        if ( ! empty( $message['excerpt'] ) ) {
                            $message['excerpt'] = $message['excerpt'] . "\n\n" . '#some_hashtag';
                        }

                        return $message;
                    }

                    add_filter( 'social_poster_prepare_message', 'my_prepare_message', 10, 3 );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_hide_settings</summary>

            <p>
                You can use this filter to hide settings page from some users or roles.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param bool $hide_settings Set true to hide settings page.
                     */
                     function my_hide_settings( $hide_settings ) {
                        $user = wp_get_current_user();

                        if ( empty( $user->user_login ) || 'admin' !== $user->user_login ) {
                            $hide_settings = true;
                        }

                        return $hide_settings;
                    }

                    add_filter( 'social_planner_hide_settings', 'my_hide_settings' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_get_providers</summary>

            <p>
                You can filter the list of providers from options. It can be handy to use options bypassing the settings page.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $providers List of provders options.
                     */
                     function my_get_providers( $providers ) {
                        $providers = array(
                            'facebook-1' => array(
                                'token' => 'token',
                                'group' => 'group',
                            ),
                        );

                        return $providers;
                    }

                    add_filter( 'social_planner_get_providers', 'my_get_providers' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_settings_object</summary>

            <p>
                This filter allows you to manage settings script object.
            </p>

            <pre>
                <code class="language-php">
                    /**
                     * @param array $object Array of settings script object.
                     */
                    function my_settings_object( $object ) {
                        $object = array(
                            'option'    => my_settings_handler( 'option' ),
                            'networks'  => my_settings_handler( 'networks' ),
                            'providers' => my_settings_handler( 'providers' ),
                        );

                        return $object;
                    }

                    add_filter( 'social_planner_settings_object', 'my_settings_object' );
                </code>
            </pre>
        </details>

        <details>
            <summary>social_planner_prepare_excerpt</summary>

            <p>The last chance to filter message excerpt before sending to social network account.</p>

            <pre>
                <code class="language-php">
                    /**
                     * @param string $excerpt Message excerpt.
                     * @param array  $message Original message array.
                     * @param string $network Network name.
                     */
                    function my_prepare_excerpt( $excerpt, $message, $network ) {
                        if ( empty( $excerpt ) ) {
                            $excerpt = get_the_title( $message[ $post_id ] );
                        }

                        return $message;
                    }

                    add_filter( 'social_planner_prepare_excerpt', 'my_prepare_excerpt', 10, 3 );
                </code>
            </pre>
        </details>
    </section>

    <section>
        <h2 id="donation">Donation <a aria-hidden="true" href="#donation">#</a></h2>

        <p>
            The development of this plugin is carried out by the author in his free time and at his own expense.
            Any your help is greatly appreciated. Use a convenient payment system to send money.
        </p>

        <ul>
            <li><a href="https://www.paypal.com/paypalme/antonlukin/15" target="_blank">PayPal</a>.</li>
            <li><a href="https://www.tinkoff.ru/sl/9d2MBM7TJSX" target="_blank">Tinkoff Bank</a>.</li>
            <li><a href="https://yoomoney.ru/to/410011564509832" target="_blank">Yoomoney</a>.</li>
        </ul>

        <p>
            Leave a link to your profile in the payment description and I can provide you with priority support.
        </p>
    </section>

    <section>
        <h2 id="contribution">Contribution <a aria-hidden="true" href="#contribution">#</a></h2>

        <p>
            The best way to help the project is to report a bug or add some new functionality.
            All project code is stored on <a href="https://github.com/antonlukin/social-planner">Github</a>.
            You can also open there an <a href="https://github.com/antonlukin/social-planner/issues" taget="_blank">issue</a>
            or send a <a href="https://github.com/antonlukin/social-planner/pulls" target="_blank">pull reguest</a>.
        </p>

        <p>
            To start development follow the instructions:
        </p>

        <ol>
            <li>Fork the repository.</li>
            <li>Install dependencies with <code>yarn</code> and <code>composer update</code>.</li>
            <li>Add some code.</li>
            <li>Check the syntax according to <a href="https://make.wordpress.org/core/handbook/best-practices/coding-standards/" target="_blank">WordPress Coding Standards</a>.</li>
            <li>Write tests if needed.</li>
            <li>Build assets with <code>gulp build</code> command.</li>
            <li>Increase plugin version in <code>package.json</code> and <code>social-planner.php</code> files.</li>
            <li>Create a pull request.</li>
        </ol>

        <p>
            A great opportunity to help a project is to write a new provider class.
            You can read more about this in the section <a href="#custom-providers">Custom providers</a>.
        </p>
    </section>

    <footer>
        <p>Made with love in Saint Petersburg by <a href="https://lukin.me" target="_blank">Anton Lukin</a></p>
    </footer>

    <script src="highlight.js"></script>
    <script>
        document.querySelectorAll('pre code').forEach(element => {
            var html = element.innerHTML;
            var pattern = html.match(/\s*\n[\t\s]*/);

            element.innerHTML = html.replace(new RegExp(pattern, "g"), "\n");
        });

        if (window.hljs) {
            hljs.initHighlightingOnLoad();
        }
    </script>
</body>
</html>